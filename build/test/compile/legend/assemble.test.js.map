{"version":3,"file":"assemble.test.js","sourceRoot":"","sources":["../../../../test/compile/legend/assemble.test.ts"],"names":[],"mappings":"AAAA,8BAA8B;AAE9B,OAAO,EAAC,MAAM,EAAC,MAAM,MAAM,CAAC;AAC5B,OAAO,EAAC,uBAAuB,EAAC,MAAM,YAAY,CAAC;AAGnD,QAAQ,CAAC,iBAAiB,EAAE;IAC1B,EAAE,CAAC,wDAAwD,EAAE;QAC3D,IAAM,KAAK,GAAG,uBAAuB,CAAC;YACpC,SAAS,EAAE,iDAAiD;YAC5D,aAAa,EAAE,yDAAyD;YACxE,MAAM,EAAE,EAAC,KAAK,EAAE,gBAAgB,EAAC;YACjC,MAAM,EAAE,OAAO;YACf,UAAU,EAAE;gBACV,GAAG,EAAE,EAAC,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE,cAAc,EAAC;gBACpD,GAAG,EAAE,EAAC,OAAO,EAAE,kBAAkB,EAAE,MAAM,EAAE,cAAc,EAAC;gBAC1D,OAAO,EAAE,EAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAC;gBAC/C,OAAO,EAAE,EAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAC;aAChD;SACF,CAAC,CAAC;QACH,KAAK,CAAC,WAAW,EAAE,CAAC;QAEpB,IAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEhC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACzC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACzC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uEAAuE,EAAE;QAC1E,IAAM,KAAK,GAAG,uBAAuB,CAAC;YACpC,MAAM,EAAE,EAAC,QAAQ,EAAE,CAAC,EAAC,GAAG,EAAE,GAAG,EAAC,GAAG,EAAE,EAAE,EAAC,EAAC,EAAC,GAAG,EAAE,GAAG,EAAC,GAAG,EAAE,EAAE,EAAC,CAAC,EAAC;YAC3D,MAAM,EAAE,KAAK;YACb,UAAU,EAAE;gBACV,GAAG,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,MAAM,EAAE,SAAS,EAAC;gBACrC,GAAG,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,MAAM,EAAE,cAAc,EAAC;gBAC1C,OAAO,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,MAAM,EAAE,cAAc,EAAC;gBAC9C,MAAM,EAAE,EAAC,OAAO,EAAE,GAAG,EAAC,MAAM,EAAE,cAAc,EAAC;aAC9C;SACF,CAAC,CAAC;QAEH,KAAK,CAAC,WAAW,EAAE,CAAC;QAEpB,IAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QACxC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACvC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* tslint:disable:quotemark */\n\nimport {assert} from 'chai';\nimport {parseUnitModelWithScale} from '../../util';\n\n\ndescribe('legend/assemble', () => {\n  it('merges legend of the same field with the default type.', () => {\n    const model = parseUnitModelWithScale({\n      \"$schema\": \"https://vega.github.io/schema/vega-lite/v2.json\",\n      \"description\": \"A scatterplot showing horsepower and miles per gallons.\",\n      \"data\": {\"url\": \"data/cars.json\"},\n      \"mark\": \"point\",\n      \"encoding\": {\n        \"x\": {\"field\": \"Horsepower\", \"type\": \"quantitative\"},\n        \"y\": {\"field\": \"Miles_per_Gallon\", \"type\": \"quantitative\"},\n        \"color\": {\"field\": \"Origin\", \"type\": \"nominal\"},\n        \"shape\": {\"field\": \"Origin\", \"type\": \"nominal\"}\n      }\n    });\n    model.parseLegend();\n\n    const legends = model.assembleLegends();\n    assert.equal(legends.length, 1);\n\n    assert.equal(legends[0].title, 'Origin');\n    assert.equal(legends[0].stroke, 'color');\n    assert.equal(legends[0].shape, 'shape');\n  });\n\n  it('merges legend of the same field and favor symbol legend over gradient', () => {\n    const model = parseUnitModelWithScale({\n      \"data\": {\"values\": [{\"a\": \"A\",\"b\": 28},{\"a\": \"B\",\"b\": 55}]},\n      \"mark\": \"bar\",\n      \"encoding\": {\n        \"x\": {\"field\": \"a\",\"type\": \"ordinal\"},\n        \"y\": {\"field\": \"b\",\"type\": \"quantitative\"},\n        \"color\": {\"field\": \"b\",\"type\": \"quantitative\"},\n        \"size\": {\"field\": \"b\",\"type\": \"quantitative\"}\n      }\n    });\n\n    model.parseLegend();\n\n    const legends = model.assembleLegends();\n    assert.equal(legends.length, 1);\n    assert.equal(legends[0].title, 'b');\n    assert.equal(legends[0].type, 'symbol');\n    assert.equal(legends[0].fill, 'color');\n    assert.equal(legends[0].size, 'size');\n  });\n});\n"]}